<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layouts/adminLayout :: admin_head}"> 
</head>
<body>
    <header th:replace="~{layouts/adminLayout :: admin_header}"></header>
    <div class ="container">
		<div class = "row">
			<h1> List users </h1>
		</div>
		
		<div class = "row">
			<div class = "col-3">
				<a th:href = "@{/admin/user/new}" class = "btn btn-primary btn-sm mb-3" style="width: 90px;"> Add user</a>
			</div>
			<div class="col-9">
				<form th:action="@{/admin/user/1}">
					Filter: <input type="text" name="keyword" id="keyword" style="width: 60%;position: relative;" th:value="${keyword}" required />
					<a type="button" value="btnClear" id="btnClear" style="position: relative;right:20px" onclick="clearSearch()">x</a>
					<input type="submit" value="Search"/>
				</form>
			</div>
		</div>
		<table class = "table table-striped table-bordered">
			<thead class = "table-dark">
				<tr>
					<th>full name</th>
					<th>dia chi</th>
					<th>sdt</th>
					<th> Actions </th>
				</tr>
			</thead>
			
			<tbody>
				<tr th:each = "user: ${users}">
					<td th:text = "${user.fullName}"></td>
					<td th:text = "${user.diaChi}"></td>
					<td th:text = "${user.sdt}"></td>
					<td>
						<a th:href = "@{/admin/user/edit/{id}(id=${user.id})}"
						 class = "btn btn-primary">Update</a>
						
						<a th:href = "@{/admin/user/delete/{id}(id=${user.id})}"
						 class = "btn btn-danger">Delete</a>
						 
					</td>
				</tr>
			</tbody>
		
		</table>
		
		<a th:if="${currentPage > 1}" th:href="@{'/admin/user/1' +${keyword != null ? '?keyword=' + keyword : ''}}">First</a>
		<span th:unless="${currentPage > 1}">First</span>
		<a th:if="${currentPage > 1}" th:href="@{'/admin/user/' + ${currentPage-1} +${keyword != null ? '?keyword=' + keyword : ''}}">Previous</a>
		<span th:unless="${currentPage > 1}">Previous</span>
		<span th:each="i: ${#numbers.sequence(1, totalPages)}">
			<!-- <a th:if="${currentPage != i}" th:href="@{/admin/user/{id} (id=${i})}">[[${i}]]</a> -->
			<a th:if="${currentPage != i}" th:href="@{'/admin/user/' + ${i} +${keyword != null ? '?keyword=' + keyword : ''}}">[[${i}]]</a>
			<span th:unless="${currentPage != i}">[[${i}]]</span>
			&nbsp;
		</span>
		<a th:if="${currentPage < totalPages}" th:href="@{'/admin/user/' + ${currentPage+1} +${keyword != null ? '?keyword=' + keyword : ''}}">Next</a>
		<span th:unless="${currentPage < totalPages}">Next</span>
		<a th:if="${currentPage < totalPages}" th:href="@{'/admin/user/' + ${totalPages}+${keyword != null ? '?keyword=' + keyword : ''}}">Last</a>
		<span th:unless="${currentPage < totalPages}">Last</span>

	</div>
	<script type="text/javascript">
		function clearSearch() {
			window.location = "[[@{/admin/user/1}]]";
		}
	</script>
	<footer th:replace="~{layouts/adminLayout :: admin_footer}"></footer>
</body>
</html>